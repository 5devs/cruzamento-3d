#VRML V2.0 utf8
#Projeto

Transform{
    children[
      PointLight {
         location 0.0 15.0 0.0
         radius   100.0
      },

        #norte
        Transform {
            translation 0.0 -3 -10
            children [
                DEF Rua Inline { url "src/rua.wrl" }
                Transform {
                    translation 5 0 0
                    rotation 0 1 0 -1.57
                    children [
                        DEF Gemeas Inline { url "src/predio4.wrl" }
                    ]
                }
            ]

        }

        #sul
        Transform {
            rotation 0 1 0 3.1415
            translation 0 -3 -34
            children [
                USE Rua
            ]
        }


        #esquerda
        Transform {
            rotation 0 1 0 4.7
            translation -11.5 -3 -22
            children [
                USE Rua

                Transform {
                    translation 6 0 -6
                    children [
                        DEF Predio1 Inline { url "src/predio1.wrl"}
                    ]
                }

                Transform {
                  translation 14 0 -4.2
                  rotation 0 1 0 1.57
                  children [
                    Inline { url "src/predio5.wrl" }
                  ]
                }
            ]
        }


        #direita
        Transform {
            rotation 0 1 0 1.57
            translation 11.5 -3 -22
            children [
                USE Rua

                Transform {
                    translation 5.5 0 -6
                    children [
                        DEF Predio2 Inline { url "src/predio2.wrl" }
                    ]
                }
            ]
        }
		
		#predio
		Transform {
            rotation 0 1 0 1.57
            translation 17.5 -3 -15
            children [
                USE Predio1
            ]
        }
		
		Transform {
            rotation 0 1 0 1.57
            translation 17.5 -3 -5
            children [
                USE Predio2
            ]
        }
		
		Transform {
            rotation 0 1 0 1.57
            translation -17.5 -3 -5
            children [
                USE Predio2
            ]
        }
		
		#use gemeas
		Transform {
            rotation 0 1 0 0
            translation -15 -3 -15
            children [
                USE Gemeas
            ]
        }
		

        #Parte central da rua
        Transform {
            translation 0 -2.9 -22
            children [
                Shape {
                    appearance Appearance {
                        texture ImageTexture {
                            repeatS TRUE
                            repeatT TRUE
                            url "src/textures/asfalto.jpg"
                          }
                        textureTransform TextureTransform {
                            scale 2 4
                        }
                    }
                    geometry Box { size 3 .2 4 }
                }
            ]
        }


        #Ch√£o
        Transform {
            translation 0 -3 -22
            children [
                Shape {
                    appearance Appearance {
                        material Material {
                            diffuseColor 0 .5 0
                        }
                    }
                    geometry Box { size 43 .2 45 }
                }
            ]
        }

        #Carro
        DEF Carro Transform {
            translation 0.8 -2.4 -1
            rotation 0 1 0 1.57
            scale 0.65 0.65 0.65
            children [
                 Inline { url "src/carro.wrl" }
            ]
        }
    ] #fim Children

}

#
#  Animation
#
DEF Clock TimeSensor {
    cycleInterval 10 
    loop TRUE
    startTime 0.10
    stopTime 0
}



DEF Move PositionInterpolator {
    key [ 0.0, 0.3, 0.5, 1.0 ]
    keyValue [
        0.8 -2.4 -1,
        0.8 -2.4 -12,
        0.8 -2.4 -14,
        0.8 -2.4 -50,
    ]
}

ROUTE Clock.fraction_changed TO Move.set_fraction
ROUTE Move.value_changed TO Carro.set_translation

